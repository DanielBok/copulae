os: linux
dist: xenial  # ubuntu 16.04
language: python

python:
  - 3.7
  - 3.6

install:
  - pip install coveralls pytest pytest-cov
  - pip install -e .

script:
  - make test

after_success:
  - coveralls

stages:
  - test
  - name: deploy
    if: branch = master


jobs:
  include:
    - stage: deploy
      script: make dist
